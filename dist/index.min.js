var Single=function(r){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;const e=r=>"object"==typeof r&&"function"==typeof r[Symbol.iterator],n=r=>"object"==typeof r&&"function"==typeof r.onSubscribe,t=r=>r instanceof Promise||!!r&&("object"==typeof r||"function"==typeof r)&&"function"==typeof r.then;function o(r){const{onSuccess:e,onError:n,controller:t}=this;if(!t.signal.aborted)try{void 0===r?n("onSuccess called with undefined."):e(r)}finally{t.abort()}}function s(r){const{onError:e,controller:n}=this;let t=r;if(r instanceof Error||(t=new Error("onError called with a non-Error value.")),!n.signal.aborted)try{e(t)}finally{n.abort()}}const i=r=>r,c=r=>{throw r},u=r=>({onSubscribe:r.onSubscribe,onSuccess:"function"==typeof r.onSuccess?r.onSuccess:i,onError:"function"==typeof r.onError?r.onError:c}),b=(e,n)=>{const{onSubscribe:t,onSuccess:o}=u(e),s=new r;t(s),s.signal.aborted||(o(n),s.abort())},a=(e,n)=>{const{onSubscribe:t,onError:o}=u(e),s=new r;t(s),s.signal.aborted||(o(n),s.abort())};var l=n=>{if(!e(n))return k(new Error("Single.amb: sources is not Iterable."));const t=new er;return t.sources=n,t.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:o}=u(e),s=new r,{signal:i}=s;if(o(s),i.aborted)return;const{sources:c}=this,b=c.length;for(let r=0;r<b;r+=1){if(i.aborted)return;const e=c[r];if(!(e instanceof er)){t(new Error("Single.amb: One of the sources is a non-Single.")),s.abort();break}e.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onSuccess(r){n(r),s.abort()},onError(r){t(r),s.abort()}})}}.bind(t),t};var d=(e,n)=>{if(!(n instanceof er))return e;const t=new er;return t.source=e,t.other=n,t.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:o}=u(e),s=new r,{signal:i}=s;if(o(s),i.aborted)return;const c=r=>{i.aborted||(n(r),s.abort())},b=r=>{i.aborted||(t(r),s.abort())},{source:a,other:l}=this;a.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onSuccess:c,onError:b}),l.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onSuccess:c,onError:b})}.bind(t),t};var f=e=>{const n=new er;return n.source=e,n.cached=!1,n.subscribed=!1,n.observers=[],n.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:o}=u(e),{source:s,cached:i,observers:c,subscribed:b}=this;if(i){const e=new r;o(e);const{value:s,error:i}=this;void 0!==s&&n(s),void 0!==i&&t(s),e.abort()}else{const n=c.length;c[n]=e;const t=new r;t.signal.addEventListener("abort",()=>{c.splice(n,1)}),o(t),b||(s.subscribeWith({onSubscribe(){},onSuccess:r=>{this.cached=!0,this.value=r;for(const e of c)e.onSuccess(r);this.observers=void 0},onError:r=>{this.cached=!0,this.error=r;for(const e of c)e.onError(r);this.observers=void 0}}),this.subscribed=!0)}}.bind(n),n};var h=e=>{if("function"!=typeof e)return k(new Error("Single.create: There are no subscribers."));const n=new er;return n.subscriber=e,n.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:i}=u(e),c=new r;c.onSuccess=o.bind(this),c.onError=s.bind(this),this.controller=c,this.onSuccess=n,this.onError=t,i(c);try{this.subscriber(c)}catch(r){c.onError(r)}}.bind(n),n},S=(r,e)=>{if("function"!=typeof e)return r;let n;try{if(!((n=e(r))instanceof er))throw new Error("Single.compose: transformer returned a non-Single.")}catch(r){n=k(r)}return n};const E=(r,e)=>r===e;var v=(r,e,n)=>{if(void 0===e)return r;let t=n;"function"!=typeof t&&(t=E);const o=new er;return o.source=r,o.value=e,o.comparer=t,o.subscribeActual=function(r){const{onSuccess:e,onError:n,onSubscribe:t}=u(r),{value:o,comparer:s}=this;this.source.subscribeWith({onSubscribe:t,onSuccess(r){let t;try{t=s(r,o)}catch(r){return void n(r)}e(t)},onError:n})}.bind(o),o};var w=r=>{const e=new er;return e.supplier=r,e.subscribeActual=function(r){const{onSuccess:e,onError:n,onSubscribe:t}=u(r);let o,s;try{if(!((o=this.supplier())instanceof er))throw new Error("Single.defer: supplier returned a non-Single.")}catch(r){s=r}void 0!==s?a(r,s):o.subscribeWith({onSubscribe:t,onSuccess:e,onError:n})}.bind(e),e};var p=(e,n,t)=>{if("number"!=typeof n)return e;const o=new er;return o.source=e,o.amount=n,o.doDelayError=t,o.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:o}=e,{amount:s,doDelayError:i}=this;let c;const u=new r,{signal:b}=u;o(u),b.aborted||(b.addEventListener("abort",()=>{void 0!==c&&clearTimeout(c)}),this.source.subscribeWith({onSubscribe(r){b.addEventListener("abort",()=>{r.abort()})},onSuccess(r){c=setTimeout(()=>{n(r),u.abort()},s)},onError(r){c=setTimeout(()=>{t(r),u.abort()},i?s:0)}}))}.bind(o),o};var m=(e,n)=>{if("number"!=typeof n)return e;const t=new er;return t.source=e,t.amount=n,t.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:o}=e,{amount:s}=this;let i;const c=new r,{signal:u}=c;u.addEventListener("abort",()=>{void 0!==i&&clearTimeout(i)}),o(c),u.aborted||(i=setTimeout(()=>{this.source.subscribeWith({onSubscribe(r){u.addEventListener("abort",()=>r.abort())},onSuccess(r){n(r),c.abort()},onError(r){t(r),c.abort()}})},s))}.bind(t),t};var g=(e,n)=>{if(!(n instanceof er))return e;const t=new er;return t.source=e,t.other=n,t.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:o}=e,{source:s,other:i}=this,c=new r,{signal:u}=c;o(c),u.aborted||i.subscribeWith({onSubscribe(r){u.addEventListener("abort",()=>r.abort())},onSuccess(){u.aborted||s.subscribeWith({onSubscribe(r){u.addEventListener("abort",()=>r.abort())},onSuccess(r){n(r),c.abort()},onError(r){t(r),c.abort()}})},onError(r){t(r),c.abort()}})}.bind(t),t};var y=(r,e)=>{if("function"!=typeof e)return r;const n=new er;return n.source=r,n.callable=e,n.subscribeActual=function(r){const{onSubscribe:e,onSuccess:n,onError:t}=r,{source:o,callable:s}=this;o.subscribeWith({onSubscribe:e,onSuccess(r){n(r),s(r)},onError:t})}.bind(n),n};var A=(r,e)=>{if("function"!=typeof e)return r;const n=new er;return n.source=r,n.callable=e,n.subscribeActual=function(r){const{onSubscribe:e,onSuccess:n,onError:t}=r,{source:o,callable:s}=this;o.subscribeWith({onSubscribe:e,onSuccess(r){n(r),s()},onError(r){t(r),s()}})}.bind(n),n};var W=(r,e)=>{if("function"!=typeof e)return r;const n=new er;return n.source=r,n.callable=e,n.subscribeActual=function(r){const{onSubscribe:e,onSuccess:n,onError:t}=r,{source:o,callable:s}=this;let i=!1;o.subscribeWith({onSubscribe(r){r.signal.addEventListener("abort",()=>{i||(s(),i=!0)}),e(r)},onSuccess(r){n(r),i||(s(),i=!0)},onError(r){t(r),i||(s(),i=!0)}})}.bind(n),n};var L=(r,e)=>{if("function"!=typeof e)return r;const n=new er;return n.source=r,n.callable=e,n.subscribeActual=function(r){const{onSubscribe:e,onSuccess:n,onError:t}=r,{source:o,callable:s}=this;o.subscribeWith({onSubscribe(r){r.signal.addEventListener("abort",s),e(r)},onSuccess:n,onError:t})}.bind(n),n};var z=(r,e)=>{if("function"!=typeof e)return r;const n=new er;return n.source=r,n.callable=e,n.subscribeActual=function(r){const{onSubscribe:e,onSuccess:n,onError:t}=r,{source:o,callable:s}=this;o.subscribeWith({onSubscribe:e,onSuccess:n,onError(r){s(r),t(r)}})}.bind(n),n};var T=(r,e)=>{if("function"!=typeof e)return r;const n=new er;return n.source=r,n.callable=e,n.subscribeActual=function(r){const{onSubscribe:e,onSuccess:n,onError:t}=r,{source:o,callable:s}=this;o.subscribeWith({onSubscribe:e,onSuccess(r){s(r),n(r)},onError(r){s(void 0,r),t(r)}})}.bind(n),n};var O=(r,e)=>{if("function"!=typeof e)return r;const n=new er;return n.source=r,n.callable=e,n.subscribeActual=function(r){const{onSubscribe:e,onSuccess:n,onError:t}=r,{source:o,callable:s}=this;o.subscribeWith({onSubscribe:e,onSuccess(r){s(r),n(r)},onError:t})}.bind(n),n};var P=(r,e)=>{if("function"!=typeof e)return r;const n=new er;return n.source=r,n.callable=e,n.subscribeActual=function(r){const{onSubscribe:e,onSuccess:n,onError:t}=r,{source:o,callable:s}=this;o.subscribeWith({onSubscribe(r){s(r),e(r)},onSuccess:n,onError:t})}.bind(n),n};var R=(r,e)=>{if("function"!=typeof e)return r;const n=new er;return n.source=r,n.callable=e,n.subscribeActual=function(r){const{onSubscribe:e,onSuccess:n,onError:t}=r,{source:o,callable:s}=this;o.subscribeWith({onSubscribe:e,onSuccess(r){s(),n(r)},onError(r){s(),t(r)}})}.bind(n),n};var k=r=>{let e=r;r instanceof Error||(e=new Error("Single.error received a non-Error value.")),"function"!=typeof r&&(e=(r=>()=>r)(e));const n=new er;return n.supplier=e,n.subscribeActual=function(r){let e;try{if(void 0===(e=this.supplier()))throw new Error("Single.error: Error supplier returned an undefined value.")}catch(r){e=r}a(r,e)}.bind(n),n};var j=(e,n)=>{if("function"!=typeof n)return e;const t=new er;return t.source=e,t.mapper=n,t.subscribeActual=function(e){const{onSubscribe:n,onError:t,onSuccess:o}=e,s=new r,{signal:i}=s;if(n(s),i.aborted)return;const{mapper:c,source:u}=this;u.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onSuccess(r){let e;try{if(!((e=c(r))instanceof er))throw new Error("Single.flatMap: mapper returned a non-Single")}catch(r){return void t(r)}e.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onSuccess(r){o(r),s.abort()},onError(r){t(r),s.abort()}})},onError(r){t(r),s.abort()}})}.bind(t),t};var x=e=>{if("function"!=typeof e)return k(new Error("Single.fromCallable: callable received is not a function."));const n=new er;return n.callable=e,n.subscribeActual=function(e){const{onSuccess:n,onError:i,onSubscribe:c}=e,u=new r;if(c(u),u.signal.aborted)return;this.controller=u,this.onSuccess=n,this.onError=i;const b=o.bind(this),a=s.bind(this);let l;try{l=this.callable()}catch(r){return void a(r)}t(l)?I(l).subscribe(n,i):b(l)}.bind(n),n};var I=e=>{if(!t(e))return k(new Error("Single.fromPromise: expects a Promise-like value."));const n=new er;return n.promise=e,n.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:i}=e,c=new r;i(c),c.signal.aborted||(this.controller=c,this.onSuccess=n,this.onError=t,this.promise.then(o.bind(this),s.bind(this)))}.bind(n),n};var U=e=>{if("function"!=typeof e)return k(new Error("Single.fromResolvable: expects a function."));const n=new er;return n.subscriber=e,n.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:i}=e,c=new r;if(i(c),c.signal.aborted)return;this.controller=c,this.onSuccess=n,this.onError=t;const u=o.bind(this),b=s.bind(this);this.subscriber(u,b)}.bind(n),n};var C=r=>{if(void 0===r)return k(new Error("Single.just: received an undefined value."));const e=new er;return e.value=r,e.subscribeActual=function(r){b(r,this.value)}.bind(e),e};var D=(r,e)=>{if("function"!=typeof e)return r;const t=new er;return t.source=r,t.operator=e,t.subscribeActual=function(r){let e;try{if(e=this.operator(r),!n(e))throw new Error("Single.lift: operator returned a non-Observer.")}catch(e){return void a(r,e)}this.source.subscribeWith(e)}.bind(t),t};const M=r=>r;var N=(r,e)=>{let n=e;"function"!=typeof e&&(n=M);const t=new er;return t.source=r,t.mapper=n,t.subscribeActual=function(r){const{onSuccess:e,onError:n,onSubscribe:t}=u(r),{mapper:o}=this;this.source.subscribeWith({onSubscribe:t,onSuccess(r){let t;try{if(void 0===(t=o(r)))throw new Error("Single.map: mapper function returned an undefined value.")}catch(r){return void n(r)}e(t)},onError:n})}.bind(t),t};var F=e=>{if(!(e instanceof er))return k(new Error("Single.merge: source is not a Single."));const n=new er;return n.source=e,n.subscribeActual=function(e){const{onSubscribe:n,onError:t,onSuccess:o}=u(e),s=new r,{signal:i}=s;n(s),i.aborted||this.source.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onSuccess(r){let e=r;r instanceof er||(e=k(new Error("Single.merge: source emitted a non-Single value."))),e.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onSuccess(r){o(r),s.abort()},onError(r){t(r),s.abort()}})},onError(r){t(r),s.abort()}})}.bind(n),n};var q=(e,n)=>{if(!("function"==typeof n||n instanceof er))return e;const t=new er;return t.source=e,t.resumeIfError=n,t.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:o}=u(e),{source:s,resumeIfError:i}=this,c=new r,{signal:b}=c;o(c),b.aborted||s.subscribeWith({onSubscribe(r){b.addEventListener("abort",()=>r.abort())},onSuccess(r){n(r),c.abort()},onError(r){let e;if("function"==typeof i)try{if(void 0===(e=i(r)))throw new Error("Single.onErrorResumeNext: returned an non-Single.")}catch(e){return void t(new Error([r,e]))}else e=i;e.subscribeWith({onSubscribe(r){b.addEventListener("abort",()=>r.abort())},onSuccess(r){n(r),c.abort()},onError(r){t(r),c.abort()}})}})}.bind(t),t};var B=(r,e)=>{if("function"!=typeof e)return r;const n=new er;return n.source=r,n.item=e,n.subscribeActual=function(r){const{onSuccess:e,onError:n,onSubscribe:t}=u(r),{source:o,item:s}=this;o.subscribeWith({onSubscribe:t,onSuccess:e,onError(r){let t;try{if(void 0===(t=s(r)))throw new Error(new Error("Single.onErrorReturn: returned an non-Single."))}catch(e){return void n([r,e])}e(t)}})}.bind(n),n};var G=(r,e)=>{if(void 0===e)return r;const n=new er;return n.source=r,n.item=e,n.subscribeActual=function(r){const{onSuccess:e,onSubscribe:n}=u(r),{source:t,item:o}=this;t.subscribeWith({onSubscribe:n,onSuccess:e,onError(){e(o)}})}.bind(n),n};const H={signal:{aborted:!1,addEventListener:()=>{},removeEventListener:()=>{},onabort:()=>{}},abort:()=>{}};let J;var K=()=>(void 0===J&&((J=new er).subscribeActual=function(r){r.onSubscribe(H)}.bind(J)),J);var Q=(e,n)=>{const t=new er;return t.source=e,t.bipredicate=n,t.subscribeActual=function(e){const{onSubscribe:n,onSuccess:t,onError:o}=u(e),s=new r,{signal:i}=s;if(n(s),i.aborted)return;const{source:c,bipredicate:b}=this;let a=0;const l=()=>{i.aborted||(a+=1,c.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onSuccess(r){t(r),s.abort()},onError(r){"function"==typeof b?b(a,r)?l():(o(r),s.abort()):l()}}))};l()}.bind(t),t};const V=(e,n)=>{if(!(n instanceof er))return e;const t=new er;return t.source=e,t.other=n,t.subscribeActual=function(e){const{onSubscribe:n,onSuccess:t,onError:o}=u(e),s=new r,{signal:i}=s;if(n(s),i.aborted)return;const{source:c,other:b}=this;b.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onSuccess(){i.aborted||(o(new Error("Single.takeUntil: Source cancelled by other Single.")),s.abort())},onError(r){i.aborted||(o(new Error(["Single.takeUntil: Source cancelled by other Single.",r])),s.abort())}}),c.subscribeWith({onSubscribe(r){i.addEventListener("abort",()=>r.abort())},onSuccess(r){i.aborted||(t(r),s.abort())},onError(r){i.aborted||(o(r),s.abort())}})}.bind(t),t};var X=e=>{if("number"!=typeof e)return k(new Error('Single.timer: "amount" is not a number.'));const n=new er;return n.amount=e,n.subscribeActual=function(e){const{onSuccess:n,onSubscribe:t}=u(e),o=new r,{signal:s}=o;if(t(o),s.aborted)return;const i=setTimeout(n,this.amount,0);s.addEventListener("abort",()=>{clearTimeout(i)})}.bind(n),n};var Y=(e,n)=>{if("number"!=typeof n)return e;const t=new er;return t.source=e,t.amount=n,t.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:o}=u(e),{amount:s}=this,i=new r,{signal:c}=i;if(o(i),c.aborted)return;const b=setTimeout(()=>{t(new Error("Single.timeout: TimeoutException (no success signals within the specified timeout).")),i.abort()},s);c.addEventListener("abort",()=>{clearTimeout(b)}),this.source.subscribeWith({onSubscribe(r){c.addEventListener("abort",()=>r.abort())},onSuccess(r){n(r),i.abort()},onError(r){t(r),i.abort()}})}.bind(t),t};const Z=r=>r;var $=(n,t)=>{if(!e(n))return k(new Error("Single.zip: sources is not Iterable."));let o=t;"function"!=typeof t&&(o=Z);const s=new er;return s.sources=n,s.zipper=o,s.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:o}=u(e),s=[],i=new r,{signal:c}=i;if(o(i),c.aborted)return;const{sources:b,zipper:a}=this,l=b.length;if(0===l)return t(new Error("Single.zip: empty iterable")),void i.abort();let d=l;for(let r=0;r<l;r+=1){if(c.aborted)return;const e=b[r];if(e instanceof er)e.subscribeWith({onSubscribe(r){c.addEventListener("abort",()=>r.abort())},onSuccess(e){if(!c.aborted&&(s[r]=e,0==(d-=1))){let r;try{if(void 0===(r=a(s)))throw new Error("Single.zip: zipper function returned an undefined value.")}catch(r){return t(r),void i.abort()}n(r),i.abort()}},onError(r){t(r),i.abort()}});else{if(void 0===e){t(new Error("Single.zip: One of the sources is undefined.")),i.abort();break}s[r]=e,d-=1}}}.bind(s),s};const _=(r,e)=>[r,e];var rr=(e,n,t)=>{if(!(n instanceof er))return e;let o=t;"function"!=typeof t&&(o=_);const s=new er;return s.source=e,s.other=n,s.zipper=o,s.subscribeActual=function(e){const{onSuccess:n,onError:t,onSubscribe:o}=u(e);let s,i;const c=new r,{signal:b}=c;if(o(c),b.aborted)return;const{source:a,other:l,zipper:d}=this;a.subscribeWith({onSubscribe(r){b.addEventListener("abort",()=>r.abort())},onSuccess(r){if(!b.aborted&&(s=r,void 0!==i)){let r;try{if(void 0===(r=d(s,i)))throw new Error("Single.zipWith: zipper function returned an undefined value.")}catch(r){return t(r),void c.abort()}n(r),c.abort()}},onError(r){t(r),c.abort()}}),l.subscribeWith({onSubscribe(r){b.addEventListener("abort",()=>r.abort())},onSuccess(r){if(!b.aborted&&(i=r,void 0!==s)){let r;try{if(void 0===(r=d(s,i)))throw new Error("Single.zipWith: zipper function returned an undefined value.")}catch(r){return t(r),void c.abort()}n(r),c.abort()}},onError(r){t(r),c.abort()}})}.bind(s),s};class er{static create(r){return h(r)}static amb(r){return l(r)}ambWith(r){return d(this,r)}cache(){return f(this)}compose(r){return S(this,r)}contains(r,e){return v(this,r,e)}static defer(r){return w(r)}delay(r,e){return p(this,r,e)}delaySubscription(r){return m(this,r)}delayUntil(r){return g(this,r)}doAfterSuccess(r){return y(this,r)}doAfterTerminate(r){return A(this,r)}doFinally(r){return W(this,r)}doOnAbort(r){return L(this,r)}doOnError(r){return z(this,r)}doOnEvent(r){return T(this,r)}doOnSubscribe(r){return P(this,r)}doOnSuccess(r){return O(this,r)}doOnTerminate(r){return R(this,r)}static error(r){return k(r)}flatMap(r){return j(this,r)}static fromCallable(r){return x(r)}static fromPromise(r){return I(r)}static fromResolvable(r){return U(r)}static just(r){return C(r)}lift(r){return D(this,r)}map(r){return N(this,r)}static merge(r){return F(r)}static never(){return K()}onErrorResumeNext(r){return q(this,r)}onErrorReturn(r){return B(this,r)}onErrorReturnItem(r){return G(this,r)}retry(r){return Q(this,r)}subscribeWith(r){n(r)&&this.subscribeActual(r)}subscribe(e,n){const t=new r;let o=!1;return this.subscribeActual({onSubscribe(r){r.signal.addEventListener("abort",()=>{o||(o=!0,t.signal.aborted||t.abort())}),t.signal.addEventListener("abort",()=>{o||(o=!0,r.signal.aborted||r.abort())})},onSuccess:e,onError:n}),t}takeUntil(r){return V(this,r)}static timer(r){return X(r)}timeout(r){return Y(this,r)}static zip(r,e){return $(r,e)}zipWith(r,e){return rr(this,r,e)}toPromise(){return new Promise((r,e)=>{this.subscribe(r,e)})}then(r,e){return this.toPromise().then(r,e)}catch(r){return this.toPromise().catch(r)}}return er}(AbortController);